{% extends 'base.html' %}

{% block title %} Threadz {% endblock %}
{% block content %}
{% load static %}
{% block extra_styles %}
    <link rel="stylesheet" href="{% static 'products/styles.css' %}">
{% endblock %}
<div class="container-fluid">
    {% if user.is_authenticated %}
        <h1 class="welcome">Welcome to the home page, {{ user }}!</h1>
    {% endif %}
    <div class="products-div">
        {% if messages %}
            <ul>
                {% for message in messages %}
                    <li>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
        {% for product in products %}
            {% if product.created_by %}
                <img src="{{product.image.url}}">
            {% else %}
                <img src="{{product.image }}">
            {% endif %}
            <p><a href="{% url 'product' product_id=product.id %}">{{ product.name }}</a></p>
            <p>{{  product.price }}</p>
            <p>{{ product.category }}</p>
            {% if product.created_by != user.profile %}
                <form action="{% url 'toggle_watch' product_id=product.id %}" method="post">
                    {% csrf_token %}
                    <button>Like</button>
                </form>
            {% endif %}
        {% endfor %}
    </div>

</div>
{% endblock %}